[gd_scene load_steps=8 format=2]

[ext_resource path="res://Tree/Tools/NPCEditor/behaviors/Interface/Behaviour_tree_editor.gd" type="Script" id=1]
[ext_resource path="res://Tree/Tools/NPCEditor/behaviors/Interface/Graph_compiler.gd" type="Script" id=2]
[ext_resource path="res://Assets/Interface/NPCEditorTheme.tres" type="Theme" id=3]
[ext_resource path="res://Tree/addons/inspector-gadget/src/inspector_gadget.gd" type="Script" id=4]
[ext_resource path="res://SceneComponent/Actor/Humanoid/NPCs/NPC.gd" type="Script" id=5]
[ext_resource path="res://Tree/Tools/NPCEditor/States/States.gd" type="Script" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends PopupMenu

var menus : Array = []


func _ready():
	for id in get_child_count():
		if id+1 < get_child_count() :
			menus.append(get_child(id+1))

func _on_stimulus_id_pressed(_id):
	menus[0].popup()

func _on_inhibitors_id_pressed(_id):
	menus[1].popup()

func _on_actions_id_pressed(_id):
	menus[2].popup()

func _on_misc_id_pressed(_id):
	menus[3].popup()

func _on_custom_id_pressed(_id):
	menus[4].popup()

func _on_Behaviors_id_pressed(id):
	if menus[id] is PopupMenu:
		menus[id].rect_position =  get_tree().get_root().get_mouse_position()
		menus[id].popup()
"

[node name="Node-Editor" type="TabContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 7
size_flags_vertical = 7
script = ExtResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="States" type="VSplitContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 4.0
margin_top = 32.0
margin_right = -4.0
margin_bottom = -4.0
dragger_visibility = 1
script = ExtResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ViewMenuSplit" type="HSplitContainer" parent="States"]
margin_right = 1912.0
margin_bottom = 1044.0

[node name="Container" type="VBoxContainer" parent="States/ViewMenuSplit"]
margin_right = 280.0
margin_bottom = 1044.0
rect_min_size = Vector2( 280, 0 )

[node name="type2" type="HBoxContainer" parent="States/ViewMenuSplit/Container"]
margin_right = 280.0
margin_bottom = 20.0

[node name="Open" type="Button" parent="States/ViewMenuSplit/Container/type2"]
margin_right = 138.0
margin_bottom = 20.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Open"

[node name="Save" type="Button" parent="States/ViewMenuSplit/Container/type2"]
margin_left = 142.0
margin_right = 280.0
margin_bottom = 20.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Save"

[node name="ScrollContainer" type="ScrollContainer" parent="States/ViewMenuSplit/Container"]
margin_top = 24.0
margin_right = 280.0
margin_bottom = 144.0
rect_min_size = Vector2( 0, 120 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Behaviors" type="ItemList" parent="States/ViewMenuSplit/Container/ScrollContainer"]
margin_right = 280.0
margin_bottom = 120.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="selection" type="HBoxContainer" parent="States/ViewMenuSplit/Container"]
margin_top = 148.0
margin_right = 280.0
margin_bottom = 162.0

[node name="title" type="Label" parent="States/ViewMenuSplit/Container/selection"]
margin_right = 59.0
margin_bottom = 14.0
text = "Selected:"

[node name="name" type="Label" parent="States/ViewMenuSplit/Container/selection"]
margin_left = 63.0
margin_right = 280.0
margin_bottom = 14.0
size_flags_horizontal = 3
text = " None"
align = 1

[node name="Add" type="Button" parent="States/ViewMenuSplit/Container"]
margin_top = 166.0
margin_right = 280.0
margin_bottom = 186.0
text = "Add to Tree"

[node name="HSeparator" type="HSeparator" parent="States/ViewMenuSplit/Container"]
margin_top = 190.0
margin_right = 280.0
margin_bottom = 194.0

[node name="InspectorGadgetScrollContainer" type="ScrollContainer" parent="States/ViewMenuSplit/Container"]
margin_top = 198.0
margin_right = 280.0
margin_bottom = 598.0
rect_min_size = Vector2( 0, 400 )
size_flags_horizontal = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="InspectorGadget" type="MarginContainer" parent="States/ViewMenuSplit/Container/InspectorGadgetScrollContainer"]
margin_right = 279.0
margin_bottom = 872.0
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource( 4 )
__meta__ = {
"_edit_use_anchors_": false
}
node_path = NodePath("../../../../../TemplateNPC")
subnames = ""
editable = true
property_blacklist = [  ]
custom_gadget_paths = {

}
custom_gadget_metadata = {

}
container_type_hints = {
":array_value:4": 0,
":array_value:5": "",
":dictionary_value:[keys]": "",
":dictionary_value:[values]": ""
}
filter_built_in_properties = false

[node name="HSeparator2" type="HSeparator" parent="States/ViewMenuSplit/Container"]
margin_top = 602.0
margin_right = 280.0
margin_bottom = 606.0

[node name="StatesGraphEdit" type="GraphEdit" parent="States/ViewMenuSplit"]
margin_left = 292.0
margin_right = 1912.0
margin_bottom = 1044.0
right_disconnects = true
scroll_offset = Vector2( -184, -116 )
script = ExtResource( 2 )

[node name="States" type="PopupMenu" parent="States/ViewMenuSplit/StatesGraphEdit"]
margin_left = 433.528
margin_top = 153.245
margin_right = 515.528
margin_bottom = 241.245
items = [ "Stimulus", null, 0, false, false, 0, 0, null, "", false, "Inhibitors", null, 0, false, false, 1, 0, null, "", false, "Actions", null, 0, false, false, 2, 0, null, "", false, "Custom", null, 0, false, false, 3, 0, null, "", false ]

[node name="Save" type="FileDialog" parent="States/ViewMenuSplit/StatesGraphEdit"]
margin_left = 14.0
margin_top = 65.0
margin_right = 468.0
margin_bottom = 281.0
rect_min_size = Vector2( 0, 0 )
window_title = "Guardar un Archivo"
filters = PoolStringArray( "*.jbt" )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Behaviors" type="VSplitContainer" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 4.0
margin_top = 32.0
margin_right = -4.0
margin_bottom = -4.0
dragger_visibility = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ViewMenuSplit" type="HSplitContainer" parent="Behaviors"]
margin_right = 1912.0
margin_bottom = 1044.0

[node name="Container" type="VBoxContainer" parent="Behaviors/ViewMenuSplit"]
margin_right = 200.0
margin_bottom = 1044.0
rect_min_size = Vector2( 200, 0 )

[node name="Panel" type="PanelContainer" parent="Behaviors/ViewMenuSplit/Container"]
margin_right = 200.0
margin_bottom = 166.0
size_flags_horizontal = 5
size_flags_vertical = 5

[node name="DropDowns" type="VBoxContainer" parent="Behaviors/ViewMenuSplit/Container/Panel"]
margin_left = 7.0
margin_top = 7.0
margin_right = 193.0
margin_bottom = 159.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme = ExtResource( 3 )
alignment = 1

[node name="HS2" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_right = 186.0
margin_bottom = 4.0

[node name="stimulus" type="MenuButton" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 8.0
margin_right = 186.0
margin_bottom = 33.0
size_flags_horizontal = 5
size_flags_vertical = 5
text = "Stimulus"

[node name="HS3" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 37.0
margin_right = 186.0
margin_bottom = 41.0

[node name="inhibitors" type="MenuButton" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 45.0
margin_right = 186.0
margin_bottom = 70.0
size_flags_horizontal = 5
size_flags_vertical = 5
text = "Inhibitions"

[node name="HS4" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 74.0
margin_right = 186.0
margin_bottom = 78.0

[node name="actions" type="MenuButton" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 82.0
margin_right = 186.0
margin_bottom = 107.0
size_flags_horizontal = 5
size_flags_vertical = 5
text = "Actions"

[node name="hs5" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 111.0
margin_right = 186.0
margin_bottom = 115.0

[node name="misc" type="MenuButton" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 119.0
margin_right = 186.0
margin_bottom = 144.0
size_flags_horizontal = 5
size_flags_vertical = 5
text = "Misc"

[node name="HS1" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container/Panel/DropDowns"]
margin_top = 148.0
margin_right = 186.0
margin_bottom = 152.0

[node name="HSeparator7" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 170.0
margin_right = 200.0
margin_bottom = 174.0

[node name="selection" type="HBoxContainer" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 178.0
margin_right = 200.0
margin_bottom = 192.0

[node name="VSeparator2" type="VSeparator" parent="Behaviors/ViewMenuSplit/Container/selection"]
margin_right = 4.0
margin_bottom = 14.0

[node name="title" type="Label" parent="Behaviors/ViewMenuSplit/Container/selection"]
margin_left = 8.0
margin_right = 67.0
margin_bottom = 14.0
text = "Selected:"

[node name="VSeparator3" type="VSeparator" parent="Behaviors/ViewMenuSplit/Container/selection"]
margin_left = 71.0
margin_right = 75.0
margin_bottom = 14.0

[node name="name" type="Label" parent="Behaviors/ViewMenuSplit/Container/selection"]
margin_left = 79.0
margin_right = 192.0
margin_bottom = 14.0
size_flags_horizontal = 3
text = "None"
align = 1
valign = 1

[node name="VSeparator" type="VSeparator" parent="Behaviors/ViewMenuSplit/Container/selection"]
margin_left = 196.0
margin_right = 200.0
margin_bottom = 14.0

[node name="HSeparator8" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 196.0
margin_right = 200.0
margin_bottom = 200.0

[node name="type2" type="HBoxContainer" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 204.0
margin_right = 200.0
margin_bottom = 224.0

[node name="Open" type="Button" parent="Behaviors/ViewMenuSplit/Container/type2"]
margin_right = 98.0
margin_bottom = 20.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Open"

[node name="Save" type="Button" parent="Behaviors/ViewMenuSplit/Container/type2"]
margin_left = 102.0
margin_right = 200.0
margin_bottom = 20.0
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Save"

[node name="Add" type="Button" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 228.0
margin_right = 200.0
margin_bottom = 248.0
text = "Add to Tree"

[node name="Compile" type="Button" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 252.0
margin_right = 200.0
margin_bottom = 272.0
text = "Compile"

[node name="HSeparator" type="HSeparator" parent="Behaviors/ViewMenuSplit/Container"]
margin_top = 276.0
margin_right = 200.0
margin_bottom = 280.0

[node name="GraphEdit" type="GraphEdit" parent="Behaviors/ViewMenuSplit"]
margin_left = 212.0
margin_right = 1912.0
margin_bottom = 1044.0
mouse_default_cursor_shape = 3
right_disconnects = true
scroll_offset = Vector2( -184, -116 )
script = ExtResource( 2 )

[node name="Behaviors" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit"]
margin_left = 433.528
margin_top = 153.245
margin_right = 515.528
margin_bottom = 241.245
items = [ "Stimulus", null, 0, false, false, 0, 0, null, "", false, "Inhibitors", null, 0, false, false, 1, 0, null, "", false, "Actions", null, 0, false, false, 2, 0, null, "", false, "Misc", null, 0, false, false, 3, 0, null, "", false, "Custom", null, 0, false, false, 4, 0, null, "", false ]
script = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="stimulus" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit/Behaviors"]
margin_right = 82.0
margin_bottom = 88.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="inhibitors" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit/Behaviors"]
margin_right = 82.0
margin_bottom = 88.0002

[node name="custom" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit/Behaviors"]
margin_right = 82.0
margin_bottom = 88.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="misc" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit/Behaviors"]
margin_right = 82.0
margin_bottom = 88.0002
__meta__ = {
"_edit_use_anchors_": false
}

[node name="actions" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit/Behaviors"]
margin_right = 82.0
margin_bottom = 88.0002
__meta__ = {
"_edit_use_anchors_": false
}

[node name="States" type="PopupMenu" parent="Behaviors/ViewMenuSplit/GraphEdit"]
margin_left = 433.528
margin_top = 153.245
margin_right = 515.528
margin_bottom = 241.245
items = [ "Stimulus", null, 0, false, false, 0, 0, null, "", false, "Inhibitors", null, 0, false, false, 1, 0, null, "", false, "Actions", null, 0, false, false, 2, 0, null, "", false, "Custom", null, 0, false, false, 3, 0, null, "", false ]

[node name="Save" type="FileDialog" parent="Behaviors/ViewMenuSplit/GraphEdit"]
margin_left = 14.0
margin_top = 65.0
margin_right = 468.0
margin_bottom = 281.0
rect_min_size = Vector2( 0, 0 )
window_title = "Guardar un Archivo"
filters = PoolStringArray( "*.jbt" )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TemplateNPC" type="Spatial" parent="."]
script = ExtResource( 5 )
[connection signal="pressed" from="States/ViewMenuSplit/Container/type2/Open" to="States/ViewMenuSplit/StatesGraphEdit" method="_on_Button3_pressed"]
[connection signal="pressed" from="States/ViewMenuSplit/Container/type2/Save" to="States/ViewMenuSplit/StatesGraphEdit" method="_on_save_pressed"]
[connection signal="item_selected" from="States/ViewMenuSplit/Container/ScrollContainer/Behaviors" to="States" method="_on_Behaviors_item_selected"]
[connection signal="pressed" from="States/ViewMenuSplit/Container/Add" to="States" method="_on_Add_pressed"]
[connection signal="connection_request" from="States/ViewMenuSplit/StatesGraphEdit" to="States/ViewMenuSplit/StatesGraphEdit" method="_on_GraphEdit_connection_request"]
[connection signal="disconnection_request" from="States/ViewMenuSplit/StatesGraphEdit" to="States/ViewMenuSplit/StatesGraphEdit" method="_on_GraphEdit_disconnection_request"]
[connection signal="node_selected" from="States/ViewMenuSplit/StatesGraphEdit" to="States/ViewMenuSplit/StatesGraphEdit" method="_on_GraphEdit_node_selected"]
[connection signal="file_selected" from="States/ViewMenuSplit/StatesGraphEdit/Save" to="States/ViewMenuSplit/StatesGraphEdit" method="_on_save_file_selected"]
[connection signal="pressed" from="Behaviors/ViewMenuSplit/Container/type2/Open" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_Button3_pressed"]
[connection signal="pressed" from="Behaviors/ViewMenuSplit/Container/type2/Save" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_save_pressed"]
[connection signal="pressed" from="Behaviors/ViewMenuSplit/Container/Add" to="." method="_on_Add_node_pressed"]
[connection signal="pressed" from="Behaviors/ViewMenuSplit/Container/Compile" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_Button3_pressed"]
[connection signal="connection_request" from="Behaviors/ViewMenuSplit/GraphEdit" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_GraphEdit_connection_request"]
[connection signal="disconnection_request" from="Behaviors/ViewMenuSplit/GraphEdit" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_GraphEdit_disconnection_request"]
[connection signal="node_selected" from="Behaviors/ViewMenuSplit/GraphEdit" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_GraphEdit_node_selected"]
[connection signal="id_pressed" from="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" to="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" method="_on_Behaviors_id_pressed"]
[connection signal="id_pressed" from="Behaviors/ViewMenuSplit/GraphEdit/Behaviors/stimulus" to="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" method="_on_stimulus_id_pressed"]
[connection signal="id_pressed" from="Behaviors/ViewMenuSplit/GraphEdit/Behaviors/inhibitors" to="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" method="_on_inhibitors_id_pressed"]
[connection signal="id_pressed" from="Behaviors/ViewMenuSplit/GraphEdit/Behaviors/custom" to="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" method="_on_custom_id_pressed"]
[connection signal="id_pressed" from="Behaviors/ViewMenuSplit/GraphEdit/Behaviors/misc" to="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" method="_on_misc_id_pressed"]
[connection signal="id_pressed" from="Behaviors/ViewMenuSplit/GraphEdit/Behaviors/actions" to="Behaviors/ViewMenuSplit/GraphEdit/Behaviors" method="_on_actions_id_pressed"]
[connection signal="file_selected" from="Behaviors/ViewMenuSplit/GraphEdit/Save" to="Behaviors/ViewMenuSplit/GraphEdit" method="_on_save_file_selected"]
